<% provide(:title, 'Usuarios') %>
<% content_for :stylesheet do %>
    <%= stylesheet_link_tag    "styles", :media => "all" %>
<% end %>

<div class="container-fluid ">
  <div class="row content">
    <div class="col-md-10 col-xs-10">
      <h2>Usuarios</h2>
    </div>
    <% if current_user.role.id == 1  %>
      <div class="col-md-2 col-xs-2">
        <%= link_to "Crear usuario", new_user_url, class:"btn btn-success float-right" %>
      </div>
    <% end %>
  </div>
  <div class="row">
    <div class="col-md-12 col-xs-12">


      <ul class="nav nav-tabs justify-content-left" role="tablist">
        <li class="nav-item"><a class="nav-link active pills" data-toggle="tab" href="#students-index" role="tab">Estudiantes</a></li>
        <li class="nav-item"><a class="nav-link pills" data-toggle="tab" href="#professors-index" role="tab">Profesores</a></li>
      </ul>

      <div class="tab-content" id="nav-tabContent-usersindex">
        <div class="tab-pane fade show active" id="students-index" role="tabpanel" aria-labelledby="students-tab">
          <table class="table table-hover table-responsive">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Correo</th>
                <th>Rol</th>
                <% if current_user.role.id == 1  %>
                  <th>Acciones</th>
                <% end %>
              </tr>
            </thead>
            <tbody>
              <% for student in @students do %>
              <tr>
                <td width="20%" > <a href=<%= show_user_url(student) %>> <%= student.name %> </a> </td>
                <td width="20%"><%= student.last_name %></td>
                <td width="20%"><%= student.email %></td>
                <td width="10%"><%= student.role.name %></td>
                <% if current_user.role.id == 1  %>
                  <td width="20%">
                    <%= link_to edit_user_data_path(student),class:"btn btn-warning" do %>
                      <i class="fa fa-pencil"></i>
                    <% end %>
                    <%= link_to destroy_user_path(student), method: :delete, data: { confirm: '¿Estás seguro de querer borrar este usuario?' },  class: 'btn btn-danger' do %>
                      <i class="fa fa-trash"></i>
                    <% end %>
                  </td>
                <% end %>
              </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <div class="tab-pane fade show" id="professors-index" role="tabpanel" aria-labelledby="professors-tab">
          <table class="table table-hover table-responsive">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Apellido</th>
                  <th>Correo</th>
                  <th>Rol</th>
                  <% if current_user.role.id == 1  %>
                    <th>Acciones</th>
                  <% end %>
                </tr>
              </thead>
              <tbody>
                <% for prof in @professors do %>
                <tr>
                  <td width="20%" > <a href=<%= show_user_url(prof) %>> <%= prof.name %> </a> </td>
                  <td width="20%"><%= prof.last_name %></td>
                  <td width="20%"><%= prof.email %></td>
                  <td width="10%"><%= prof.role.name %></td>
                  <% if current_user.role.id == 1  %>
                    <td width="20%">
                      <%= link_to edit_user_data_path(prof),class:"btn btn-warning" do %>
                        <i class="fa fa-pencil"></i>
                      <% end %>
                      <%= link_to destroy_user_path(prof), method: :delete, data: { confirm: '¿Estás seguro de querer borrar este usuario?' },  class: 'btn btn-danger' do %>
                        <i class="fa fa-trash"></i>
                      <% end %>
                    </td>
                  <% end %>
                </tr>
                <% end %>
              </tbody>
            </table>
        </div>
      </div>


    </div>
  </div>
</div>
